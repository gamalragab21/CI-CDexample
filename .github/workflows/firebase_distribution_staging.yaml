name: Manual Workflow

on:
  workflow_dispatch:

upload-firebase:
  name: Upload App to Firebase App Distribution
  runs-on: ubuntu-latest
  steps:
    - name: Checkout the code
      uses: actions/checkout@v3

    - name: Set up JDK 17
      uses: actions/setup-java@v3
      with:
        java-version: '17'
        distribution: 'corretto'

    - name: Download APK from GitHub release
      uses: actions/download-artifact@v2
      with:
        name: app-release-signed
        path: app/
        ref: ${{ github.event.release.tag_name }}

    - name: Upload artifact to Firebase App Distribution
      uses: wzieba/Firebase-Distribution-Github-Action@v1.5.0
      with:
        appId: ${{ secrets.FIREBASE_APP_ID }}
#          serviceCredentialsFileContent: ${{ secrets.CREDENTIAL_FILE_CONTENT }}
        groups: qa
        file: app/app-release-signed.apk

#      - name: Install Firebase CLI
#        run: npm install -g firebase-tools
#
#      - name: Install and configure Firebase CLI
#        uses: firebase/firebase-cli@v1.2.0
#        with:
#          args: 'deploy --only hosting'
#        env:
#          FIREBASE_CLI_TOKEN: ${{ secrets.FIREBASE_TOKEN }}
#
#      - name: Upload APK to Firebase App Distribution
#        uses: firebase/app-distribution-upload@v1
#        with:
#          appId: ${{ secrets.FIREBASE_APP_ID }}
#          token: ${{ secrets.FIREBASE_TOKEN }}
#          apkPath: app/app-release-signed.apk
#          releaseNotesFile: app/release_notes.txt